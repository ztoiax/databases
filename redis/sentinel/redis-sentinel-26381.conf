# 端口
port 26381

# 允许后台启动
daemonize yes

# 日志文件的目录
dir "/home/tz/redis/config/sentinel"

# 日志文件名
logfile "26381.log"

# 仅仅只需要指定要监控的主节点，并自己定义名字
# 1表示quorum：要判定master最终不可达的票数（设置越小，下线条件越宽松，反之越严格）一般设置sentinel节点数的一半+1（例如3个sentinel节点就设置2）
# quorum除了代表票数外，还与领导者选举有关，至少要max(quorum, num(sentinels) / 2 + 1)个sentinel节点参与投票才能进行选举领导者（例如quorum=4，那么至少4个在线sentinel节点才能进行选举）
sentinel monitor YouMasterName 127.0.0.1 6379 1

# sentinel定期PING 主从节点和其他sentinel节点，超过时间(单位毫秒，这里为60秒)没有答复，则判定不可达
sentinel down-after-milliseconds YouMasterName 60000

# 当主服务器失效时， 在不询问其他 Sentinel 意见的情况下， 强制开始一次自动故障迁移
# 故障转移超时时间，超过后故障转移失败。下一次在故障超时时间设置为2倍
sentinel failover-timeout YouMasterName 5000

# 在执行故障转移，选举出新master后：最多可以有多少个slave同时对新master进行复制操作， 这个数字越大表示多个slave向新master同时发起复制操作（虽不会阻塞master，但会造成master的网络和磁盘IO开销）
# =1表示slave会轮询发起复制

# 故障转移期间，出现重要事件（如-sdown客观下线、-odown主观下线）时，会触发对应路径的shell脚本，并向脚本发送相应事件的参数

# 将故障转移后的结果发送给对应路径的shell脚本（也可以使用上一个参数的脚本）

# Generated by CONFIG REWRITE
pidfile "/var/run/redis.pid"
protected-mode no
latency-tracking-info-percentiles 50 99 99.9
user default on nopass sanitize-payload ~* &* +@all
sentinel myid 7814f58a60f1e32df29f3e546976bbe624051aed
sentinel config-epoch YouMasterName 3
sentinel leader-epoch YouMasterName 2
sentinel known-replica YouMasterName 127.0.0.1 6379
sentinel known-replica YouMasterName 127.0.0.1 6381
sentinel known-sentinel YouMasterName 127.0.0.1 26380 80cb6b182900265c6cf3deac802b94bed68cd860
sentinel known-sentinel YouMasterName 127.0.0.1 26379 7e2ab97f7bd66e722573ecb98dd87ebe7acc1ae4
sentinel current-epoch 3

